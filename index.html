<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Corporate Finance Calculator Suite</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
/* --------- LIGHT THEME --------- */
:root {
    --primary: #0B2545;
    --secondary: #1FB6A4;
    --highlight: #F5A524;
    --bg: #F7FAFC;
    --card: #ffffff;
    --text: #1F2D3D;
    --shadow: rgba(0,0,0,0.1);
}

/* --------- DARK THEME --------- */
:root.dark {
    --primary: #e5f2ff;
    --secondary: #32d4c2;
    --highlight: #ffcd73;
    --bg: #0f172a;
    --card: #1e293b;
    --text: #e2e8f0;
    --shadow: rgba(255,255,255,0.05);
}

body {
    background: var(--bg);
    margin: 0;
    font-family: "Inter", sans-serif;
    color: var(--text);
    transition: background 0.3s ease, color 0.3s ease;
}

/* Header */
h1 {
    text-align: center;
    padding: 25px 10px;
    background: var(--primary);
    color: white;
    margin: 0;
    font-weight: 700;
    letter-spacing: 1px;
}

/* Theme Toggle */
.theme-toggle {
    position: fixed;
    top: 20px;
    right: 20px;
    background: var(--secondary);
    padding: 10px 14px;
    border-radius: 30px;
    font-weight: bold;
    border: none;
    cursor: pointer;
    color: white;
    box-shadow: 0 4px 12px var(--shadow);
    transition: background 0.3s ease, transform 0.2s ease;
}

.theme-toggle:hover {
    transform: scale(1.05);
    background: var(--primary);
}

/* Card */
.section {
    max-width: 750px;
    margin: 25px auto;
    background: var(--card);
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 8px 24px var(--shadow);
    animation: fadeIn 0.5s ease;
    transition: background 0.3s ease, box-shadow 0.3s ease;
}

/* Fade Animation */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Inputs */
input {
    width: 100%;
    padding: 12px;
    border-radius: 10px;
    border: 1px solid #ccc;
    margin-top: 8px;
    transition: 0.3s;
    background: var(--bg);
    color: var(--text);
}

input:focus {
    border-color: var(--secondary);
    box-shadow: 0 0 0 3px rgba(31,182,164,0.3);
    outline: none;
}

/* Buttons */
button.calc-btn {
    background: var(--secondary);
    padding: 12px 18px;
    color: white;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-weight: bold;
    margin-top: 12px;
    transition: 0.3s;
}

button.calc-btn:hover {
    background: var(--primary);
}

/* Results */
.result {
    margin-top: 15px;
    font-weight: bold;
    color: var(--highlight);
    font-size: 1.2rem;
}
</style>
</head>

<body>

<button class="theme-toggle" onclick="toggleTheme()">üåô Dark Mode</button>

<h1>Corporate Finance Advanced Calculator Suite</h1>

<!-- COST OF DEBENTURES -->
<div class="section">
    <h2>Cost of Debentures</h2>
    <p><b>Formula:</b> (Interest / Net Proceeds) √ó (1 ‚àí Tax)</p>

    <input id="debInterest" placeholder="Annual Interest (‚Çπ)">
    <input id="debNet" placeholder="Net Proceeds (‚Çπ)">
    <input id="debTax" placeholder="Tax Rate (%)">

    <button class="calc-btn" onclick="calcDebenture()">Calculate</button>
    <div id="debResult" class="result"></div>
</div>

<!-- CAPM -->
<div class="section">
    <h2>Cost of Equity (CAPM)</h2>
    <p><b>Formula:</b> Re = Rf + Œ≤ (Rm ‚àí Rf)</p>

    <input id="capmRf" placeholder="Risk-Free Rate (%)">
    <input id="capmBeta" placeholder="Beta (Œ≤)">
    <input id="capmRm" placeholder="Market Return (%)">

    <button class="calc-btn" onclick="calcCAPM()">Calculate</button>
    <div id="capmResult" class="result"></div>
</div>

<!-- DGM -->
<div class="section">
    <h2>Cost of Equity ‚Äî Dividend Growth Model</h2>
    <p><b>Formula:</b> Re = (D1 / P0) + g</p>

    <input id="dgmD1" placeholder="Next Year Dividend (D1)">
    <input id="dgmP0" placeholder="Current Price (P0)">
    <input id="dgmG" placeholder="Growth Rate (%)">

    <button class="calc-btn" onclick="calcDGM()">Calculate</button>
    <div id="dgmResult" class="result"></div>
</div>

<!-- WACC -->
<div class="section">
    <h2>Weighted Average Cost of Capital (WACC)</h2>
    <p><b>Formula:</b> (E/V)Re + (D/V)Rd(1 ‚àí Tax)</p>

    <input id="waccE" placeholder="Market Value of Equity (E)">
    <input id="waccD" placeholder="Market Value of Debt (D)">
    <input id="waccRe" placeholder="Cost of Equity (%)">
    <input id="waccRd" placeholder="Cost of Debt (%)">
    <input id="waccTax" placeholder="Tax Rate (%)">

    <button class="calc-btn" onclick="calcWACC()">Calculate</button>
    <div id="waccResult" class="result"></div>
</div>

<!-- BETA -->
<div class="section">
    <h2>Beta Calculator</h2>
    <p><b>Formula:</b> Œ≤ = Cov(Ri, Rm) / Var(Rm)</p>

    <input id="betaCov" placeholder="Covariance with Market">
    <input id="betaVar" placeholder="Variance of Market">

    <button class="calc-btn" onclick="calcBeta()">Calculate</button>
    <div id="betaResult" class="result"></div>
</div>

<!-- MULTISTAGE DDM -->
<div class="section">
    <h2>Multi-Stage Dividend Discount Model</h2>
    <p><b>Formula:</b> Two-stage high growth ‚Üí terminal stable growth</p>

    <input id="msD0" placeholder="Current Dividend (D0)">
    <input id="msG1" placeholder="High Growth Rate (%)">
    <input id="msYears" placeholder="Years of High Growth">
    <input id="msG2" placeholder="Stable Growth Rate (%)">
    <input id="msR" placeholder="Required Rate of Return (%)">

    <button class="calc-btn" onclick="calcMSDDM()">Calculate</button>
    <div id="msResult" class="result"></div>
</div>

<!-- EXPLANATION -->
<div class="section" style="background:#eef7ff;">
    <h2>Understanding These Finance Models</h2>
    <p><b>Cost of Debentures:</b> Measures the post-tax cost of debt financing.</p>
    <p><b>CAPM:</b> Computes cost of equity based on systematic market risk (Œ≤).</p>
    <p><b>DGM:</b> Values equity assuming dividends grow perpetually.</p>
    <p><b>WACC:</b> Weighted cost of debt + equity used for valuation.</p>
    <p><b>Beta:</b> Indicates risk sensitivity of security returns vs market.</p>
    <p><b>Multi-Stage DDM:</b> Preferred for firms with two distinct growth phases.</p>
</div>

<script>

/* THEME SYSTEM */
function toggleTheme() {
    const root = document.documentElement;
    const isDark = root.classList.toggle("dark");
    document.querySelector(".theme-toggle").innerText = isDark ? "‚òÄÔ∏è Light Mode" : "üåô Dark Mode";
    localStorage.setItem("theme", isDark ? "dark" : "light");
}

(function loadTheme() {
    if (localStorage.getItem("theme") === "dark") {
        document.documentElement.classList.add("dark");
        document.querySelector(".theme-toggle").innerText = "‚òÄÔ∏è Light Mode";
    }
})();

/* Calculators */
function calcDebenture() {
    let I = parseFloat(debInterest.value), NP = parseFloat(debNet.value), T = debTax.value/100;
    if (NP <= 0) return debResult.innerHTML = "Invalid Net Proceeds";
    debResult.innerHTML = "Cost of Debentures: " + ((I/NP)*(1-T)*100).toFixed(2) + "%";
}

function calcCAPM() {
    let Rf = capmRf.value, B = capmBeta.value, Rm = capmRm.value;
    capmResult.innerHTML = "Cost of Equity (CAPM): " + (parseFloat(Rf)+B*(Rm-Rf)).toFixed(2) + "%";
}

function calcDGM() {
    let D1 = dgmD1.value, P0 = dgmP0.value, g = dgmG.value/100;
    if (P0 <= 0) return dgmResult.innerHTML = "Invalid Price";
    dgmResult.innerHTML = "Cost of Equity (DGM): " + (((D1/P0)+g)*100).toFixed(2) + "%";
}

function calcWACC() {
    let E = waccE.value, D = waccD.value, Re = waccRe.value/100, Rd = waccRd.value/100, T = waccTax.value/100;
    let V = parseFloat(E)+parseFloat(D);
    waccResult.innerHTML = "WACC: " + ((((E/V)*Re)+((D/V)*Rd*(1-T)))*100).toFixed(2) + "%";
}

function calcBeta() {
    let cov = betaCov.value, v = betaVar.value;
    if (v == 0) return betaResult.innerHTML = "Variance cannot be zero";
    betaResult.innerHTML = "Beta: " + (cov/v).toFixed(3);
}

function calcMSDDM() {
    let D0 = +msD0.value, g1 = msG1.value/100, n = +msYears.value, g2 = msG2.value/100, r = msR.value/100;
    let PV = 0, D = D0;

    for (let t=1; t<=n; t++) {
        D = D * (1 + g1);
        PV += D / Math.pow(1+r, t);
    }

    let TV = (D*(1+g2)) / (r-g2);
    PV += TV / Math.pow(1+r, n);

    msResult.innerHTML = "Intrinsic Value: ‚Çπ" + PV.toFixed(2);
}
</script>

</body>
</html>
